- name: Delete Juniper MX-480
  hosts: mx-series
  gather_facts: no
  vars:
    ansible_command_timeout: 300
  vars_files:
    - vars/ebgp.yml
  tasks:
    - name: Delete eBGP Overlay
      junipernetworks.junos.junos_config:
        src: "templates/ebgp-overlay-delete.j2"
        confirm_commit: yes
        update: merge
        comment: Delete eBGP Overlay
    - name: Delete Layer 3 VNIs
      junipernetworks.junos.junos_config:
        src: "templates/vni-layer3-delete.j2"
        confirm_commit: yes
        update: merge
        comment: Delete Layer 3 VNIs
    - name: Delete Layer 2 VNIs
      junipernetworks.junos.junos_config:
        src: "templates/vni-layer2-delete.j2"
        confirm_commit: yes
        update: merge
        comment: Delete Layer 2 VNIs        